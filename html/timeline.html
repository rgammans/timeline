<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> Example Timeline</title>
      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.7.0/vis.min.css">
      <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.7.0/vis.js"></script>
      <script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
      <script type='text/javascript' src="../lib/rel_moment.js"></script>
      <script type='text/javascript' src="../lib/browser-polyfill.js"></script>
  <style type='text/css'>
  </style>
</head>
<body>
  <h2>Example Timeline</h2>
<span id="warn">Please note you will need internet access for this to work. Either you don't have it or an error occured</span>
<p>
<script type='text/javascript'>
window.onload=function(){
var container = document.getElementById('vis');

events = [];
date_relations = []
function create_event(name,when,ended) {
    
    if (console.assert) {
        console.assert(events.length == date_relations.length, "Internal data inconsistent");
    }
    var loc =  events.length ;
    
    //Store the provided dates as is so they mantain any relationships.
    date_relations[loc] = { start:when, end: ended }


    //Convert to JS Dates for vis.
    var tend = typeof(ended);
    var edit = true;
    if ((tend != "undefined") && (tend != "Date")) {
        ended  = ended.toDate();
    }
    if (when instanceof MemoryMoment) {
        edit = false;
    }

    //Id is our array index which makes the call backs easy
    events[loc] = {id:loc, content:name,start:when.toDate(),end:ended, editable:edit};
    return when;
}



//*************************************************************************************************************************
// Make your edits here between these two rows of stars

game_start =            create_event("Game Start",                          moment("2015-12-21"));
s_happen =              create_event("Something Happend",                   new MemoryMoment(game_start).subtract(2,'months'));
other =                 create_event("Another thing happens",               s_happen.add(1,'day')); 
today              =    create_event("England declares WAR!",               moment());

//****************************************************************************************************************************
x = new vis.DataSet(events);
var timeline=new vis.Timeline(container,x,{
    editable: {
            add: true,         // add new items by double tapping
            updateTime: true,  // drag items horizontally
            remove: true       // delete an item by tapping the delete button top right
          },

    onMove: function (item, callback) {
        //Check Item is of the correct form.
        date_relations[item.id].start.set(item.start.toObject());
        //update vis timeline
        callback(item);
    }

            });
document.getElementById('warn').style.display = "none";
}
</script>

<div id="vis"></div>

</body>

</html>

